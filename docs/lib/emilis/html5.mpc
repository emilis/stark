--- jst -----------------------------------------------------------------------

<%

var page =              page || {};
var page_parts =        page.parts || {};
var page_yaml =         page.yaml || {};
var page_css =          page.parts.less || page.parts.css || "";
var page_js =           page.parts.js || false;

var language =          page_yaml.language || "en";
var title =             page_yaml.title || "Untitled document";
var page_image =        page_yaml.image || false;

var timestamp =         ( new Date() ).getTime().toString( 36 );

%><!DOCTYPE html>
<html lang="<%- language %>">
<head>
    <meta charset="utf8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <% if ( page_image ){ %>
        <meta property="og:image" content="<%- page_image %>">
    <% } %>
    <title><%- title %></title>
    <link rel="stylesheet" href="/style.css?<%- timestamp %>">
    <script async="async" defer="defer" src="/script.js?<%- timestamp %>"></script>
    <style type="text/css">
        <%= page_css %>
    </style>
</head>
<body>
    <%= content %>
    <script>
        document.body.htmlDone =    true;
        var event = document.createEvent('Event');
        event.initEvent( "html-done", true, true );
        document.dispatchEvent( event );
    </script>
    <% if ( page_js ){ %>
        <script> (function(){
            <%= page_js %>
        })(); </script>
    <% } %>
</body>
</html>
